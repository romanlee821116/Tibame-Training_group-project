function touchHandler(s){var t=s.changedTouches[0],c=document.createEvent("MouseEvent");c.initMouseEvent({touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup"}[s.type],!0,!0,window,1,t.screenX,t.screenY,t.clientX,t.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(c),s.preventDefault()}function drag(){$("#dragbasic div[id^='drag']").draggable({containment:"#dragbasic",stack:".drag"})}function navshow(){var s=new Array,t=0;s[0]=0,$(document).scroll(function(){s[++t]=$(document).scrollTop(),s[t]>s[t-1]?$(".navbar").slideDown():$(".navbar").slideUp()})}$(function(){Vue.component("checkBox",{template:`
        <div class='custom_popUp_template'>
            <div class="custom_popUp">
                <img src="../images/customized/customized_step_a.png" alt="">
                <h2>請選擇商品</h2>
                <p>禮盒內容尚有空格</p>
                <div>
                    <a href="#"class='custom_btn custom_popUp_close'>返回</a>            
                </div>
            </div>
        </div> 
        `}),Vue.component("checkCard",{methods:{close(){$(".custom_popUp_template").fadeOut(),$(".custom_popUp_bg").fadeOut()}},template:`
        <div class='custom_popUp_template'>
            <div class="custom_popUp">
                <img src="../images/customized/customized_step_a.png" alt="">
                <h2>卡片尚未選擇</h2>
                <p>請選擇卡片種類</p>
                <div>
                    <a href="#"class='custom_btn custom_popUp_close' @click='close'>返回</a>            
                </div>
            </div>
        </div> 
        `});new Vue({el:"#cus_wrap",data:{boxImg:[{src:"../images/customized/four_boxBodyIn.png",class:"box1",txt:"四格小資組合",price:"$480"},{src:"../images/customized/six_boxBodyIn.png",class:"box2",txt:"六格家庭組合",price:"$680"},{src:"../images/customized/nine_boxBodyIn.png",class:"box3",txt:"九格派對組合",price:"$980"}],category:[{type:"所有商品",class:"",id:"0"},{type:"銅鑼燒",class:"",id:"1"},{type:"鯛魚燒",class:"",id:"2"},{type:"大福",class:"",id:"3"},{type:"日式餅乾",class:"",id:"4"},{type:"羊羹",class:"",id:"5"},{type:"煉切",class:"",id:"6"},{type:"最中",class:"",id:"7"}],cus_item:[{txt:"這是第1個產品",class:"1 cus-item",img:"../images/customized/customizedPic.png",type:""},{txt:"這是第2個產品",class:"2 cus-item",img:"../images/customized/customizedPic.png",type:""},{txt:"這是第3個產品",class:"3 cus-item",img:"../images/customized/customizedPic.png",type:""},{txt:"這是第4個產品",class:"4 cus-item",img:"../images/customized/customizedPic.png",type:""},{txt:"這是第5個產品",class:"5 cus-item",img:"../images/customized/customizedPic.png",type:""},{txt:"這是第6個產品",class:"6 cus-item",img:"../images/customized/customizedPic.png",type:""},{txt:"這是第7個產品",class:"7 cus-item",img:"../images/customized/customizedPic.png",type:""},{txt:"這是第8個產品",class:"8 cus-item",img:"../images/customized/customizedPic.png",type:""},{txt:"這是第9個產品",class:"9 cus-item",img:"../images/customized/customizedPic.png",type:""},{txt:"這是第10個產品",class:"10 cus-item",img:"../images/customized/customizedPic.png",type:""},{txt:"這是第11個產品",class:"11 cus-item",img:"../images/customized/customizedPic.png",type:""},{txt:"這是第12個產品",class:"12 cus-item",img:"../images/customized/customizedPic.png",type:""},{txt:"這是第13個產品",class:"13 cus-item",img:"../images/customized/customizedPic.png",type:""},{txt:"這是第14個產品",class:"14 cus-item",img:"../images/customized/customizedPic.png",type:""},{txt:"這是第15個產品",class:"15 cus-item",img:"../images/customized/customizedPic.png",type:""},{txt:"這是第16個產品",class:"16 cus-item",img:"../images/customized/customizedPic.png",type:""},{txt:"這是第17個產品",class:"17 cus-item",img:"../images/customized/customizedPic.png",type:""},{txt:"這是第18個產品",class:"18 cus-item",img:"../images/customized/customizedPic.png",type:""},{txt:"這是第19個產品",class:"19 cus-item",img:"../images/customized/customizedPic.png",type:""}],bagCard:[{src:"../images/customized/card_back02.png",class:"choose-card card2",id:"2"},{src:"../images/customized/card_back03.png",class:"choose-card card3",id:"3"},{src:"../images/customized/card_back01.png",class:"choose-card card1",id:"1"},{src:"../images/customized/bag.png",class:"choose-bag",id:"0"}],iconList:[{src:"../images/customized/sticker01.png",id:"1"},{src:"../images/customized/sticker02.png",id:"2"},{src:"../images/customized/sticker03.png",id:"3"},{src:"../images/customized/sticker04.png",id:"4"},{src:"../images/customized/sticker05.png",id:"5"},{src:"../images/customized/sticker06.png",id:"6"},{src:"../images/customized/sticker07.png",id:"7"},{src:"../images/customized/sticker08.png",id:"8"},{src:"../images/customized/sticker09.png",id:"9"},{src:"../images/customized/sticker10.png",id:"10"},{src:"../images/customized/sticker11.png",id:"11"},{src:"../images/customized/sticker13.png",id:"12"}],message:"",content:"checkBox"},methods:{p1_to_p2(){0<$(".selected").length&&($(".cus_step1").animate({height:"0vh"},800),$(".cus_step1 > div").fadeOut(),$("body").css("overflowY","auto"),$(".custom_sideNode_node:nth-child(3)").addClass("before_node"),$(".custom_sideNode_node:nth-child(4)").addClass("current_node"),$(".custom_sideNode_frontBar").css("height","25%")),$(".custom_gridBox:nth-child(1)").addClass("choosenBox")},p2_to_p1(){var s=$(window).width();$(".custom_btn_p1Next").fadeOut(),$(".cus_step1-box > div").css("opacity","1"),$(".cus_box").removeClass("selected"),$(".cus_step1").animate({height:"100vh"},800),$(".cus_step1_txt").fadeIn(),$(".cus_step1-box").fadeIn().css("display","grid"),s<=575&&$(".cus_step1-box").fadeIn().css("display","flex"),$("body").css("overflowY","hidden"),$(".custom_sideNode_node:nth-child(3)").removeClass("before_node"),$(".custom_sideNode_node:nth-child(4)").removeClass("current_node"),$(".custom_sideNode_frontBar").css("height","0%")},countWord(){var s;80<$("#custom_cardText").val().length?(s=$("#custom_cardText").val().substr(0,60),$("#custom_cardText").val(s),alert("超過字數限制，多出的字將被移除！")):$("#textCount").text(100-$("#custom_cardText").val().length)}}});let o=0;$(window).width();$(".cus_step1-box > div").click(function(s){$(".custom_btn_p1Next").fadeIn(),$(".cus_step1-box > div").css("opacity",".5"),$(this).css("opacity","1"),$(".cus_box").removeClass("selected");var t=$(this).find("img").attr("class");"box1"==t?(o=4,$(".cus_box").css("display","none"),$(".four_grid").css("display","grid").addClass("selected")):"box2"==t?(o=6,$(".cus_box").css("display","none"),$(".six_grid").css("display","grid").addClass("selected")):(o=9,$(".cus_box").css("display","none"),$(".nine_grid").css("display","grid").addClass("selected"))}),$(".custom_gridBox").click(function(){$(".custom_gridBox").removeClass("choosenBox"),$(".choosenBox").length<1&&$(this).toggleClass("choosenBox")}),$(".cus-item").mouseover(function(s){$(this).find(".cus_item_img").css("zIndex","2"),$(this).find(".cus_item_txt").css({display:"block",zIndex:"1"})}).mouseleave(function(s){$(this).find(".cus_item_img").css("zIndex","0"),$(this).find(".cus_item_txt").css({display:"none",zIndex:"0"})}),$(".fa-plus").click(function(s){let t=$(this).closest("div").prev("div").find("img").attr("src");var c=t.replace(".png","Top.png"),e=$(this).closest("div").find("p").text();$(".selected .choosenBox").find(".selected_item").attr("src",c).addClass("haveItem"),$(".selected .choosenBox").find(".selected_item").attr("data-itemName",e),s.preventDefault();e=parseInt($(".selected .choosenBox").attr("box-id")),s=`.selected .custom_gridBox[box-id=${e+1}]`;$(".custom_gridBox").removeClass("choosenBox"),$(s).addClass("choosenBox"),e==o&&($("html,body").animate({scrollTop:0},1e3),$(".selected .custom_gridBox").addClass("choosenBox"))}),$(".s2_nextstep").click(function(){if(console.log($(".selected .haveItem").length),$(".selected .haveItem").length==o){$(".custom_itemConfirm_List").fadeIn(),$(".cus_product_contianer").fadeOut(),$(".cus_product_category").fadeOut(),$(".cus_box").css({transform:"translate(0%, 30px)",transition:"1s"}),$(".selected .custom_gridBox").addClass("choosenBox"),$(".cus_confirm_btn").css("display","flex"),$(".s2_prestep").css("display","none"),$(".s2_nextstep").css("display","none"),$(".cus_step2_txt>h2").text("確認禮盒內容"),$("body").css({});var s=$(".selected  img:nth-child(even)");let t="";console.log(o),4==o?$(".custom_itemConfirm_List > h2").html("四格小資組合 &nbsp $480"):6==o?$(".custom_itemConfirm_List > h2").html("六格家庭組合 &nbsp $680"):$(".custom_itemConfirm_List > h2").html("九格家庭組合 &nbsp $980"),$(s).each(function(){var s=`
                    <div> 
                        <img src="${$(this).attr("src")}" alt="">
                        <p>${$(this).attr("data-itemName")}(1入)</p>
                        <!-- <p>x1</p> -->
                    </div>
                `;t+=s}),$(".custom_itemConfirm_List").append(t),$(".custom_sideNode_node:nth-child(4)").addClass("before_node"),$(".custom_sideNode_node:nth-child(5)").addClass("current_node"),$(".custom_sideNode_frontBar").css("height","50%")}else $(".custom_popUp").fadeIn(),$(".custom_popUp_bg").fadeIn()}),$(".cus_confirm_prestep").click(function(){$(".custom_itemConfirm_List>div").remove(),$(".cus_product_contianer").fadeIn(),$(".cus_product_category").fadeIn(),$(".cus_box").css({transform:"translate(0%, 0%)",transition:"1s"}),$(".custom_gridBox").removeClass("choosenBox"),$(".custom_gridBox:nth-child(1)").addClass("choosenBox"),$(".cus_confirm_btn").css("display","none"),$(".s2_prestep").css("display","block"),$(".s2_nextstep").css("display","block"),$(".cus_step2_txt>h3").text("第二步"),$(".cus_step2_txt>h2").text("選擇禮盒內容"),$(".cus_step1").animate({height:"0vh"},800),$(".cus_step1>div").css({display:"none"}),$("body").css({overflowY:"auto"})}),$(".cus_confirm_nextstep").click(function(){$("body").css("overflow","hidden"),$(".custom_itemConfirm_List").fadeOut(),$(".cus_bag_card").fadeIn(),$(".cus_box").css({width:"130px",height:"auto"});var s=$(".selected").offset().top;console.log(s),$(".cus_giftbox").animate({top:`${s-5}px`,opacity:"1"},1e3),$(".cus_step2_txt").css("opacity","0"),$(".cus_step2_txt>h2").text("是否製作禮物卡?"),$(".cus_step2_txt>h3").text("第三步"),$(".cus_step2_txt>h3").css("opacity","0"),$(".cus_confirm_btn").fadeOut(),setTimeout(function(){$(".cus_box").css({display:"none"}),$(".cus_giftbox").css({top:"50%",transform:"translate(-50%, -50%)",transition:".5s"}),$(".cus_step2_txt").css("opacity","1"),$(".cus_giftcard_btn").css("display","flex").fadeIn()},1500),$(".custom_sideNode_node:nth-child(5)").addClass("before_node"),$(".custom_sideNode_node:nth-child(6)").addClass("current_node"),$(".custom_sideNode_frontBar").css("height","75%")}),$(".cus_giftcard_stop").stop().mouseenter(function(){$(".choose-bag").fadeIn(),$(".cus_bag_card").css("bottom","-5%")}).mouseleave(function(){$(".choose-bag").fadeOut(),$(".cus_bag_card").css("bottom","-100%")}),$(".cus_giftcard_nextstep").stop().mouseenter(function(){$(".choose-card").fadeIn(),$(".cus_bag_card").css("bottom","-5%")}).mouseleave(function(){$(".choose-card").fadeOut(),$(".cus_bag_card").css("bottom","-100%")}),$(".cus_giftcard_stop").click(function(){var s=parseInt($(".selected").offset().top);parseInt($(window).height());$(".cus_giftcard_nextstep").unbind("mouseenter mouseleave"),$(".cus_giftcard_stop").unbind("mouseenter mouseleave"),$(".cus_step2_txt").fadeOut(),$(".cus_giftcard_btn").fadeOut(),$(".choose-bag").fadeIn(),$(".cus_bag_card").css({bottom:"52%",transform:"translate(-50%, 0%)",transition:"1s"}),setTimeout(function(){$(".custom_cart").css("display","flex").fadeIn()},2300)}),$(".cus_giftcard_nextstep").click(function(){var s=$(window).width();$(".cus_step2_txt>h2").text("選擇禮物卡樣式"),$(".cus_step2_txt>h3").css("opacity","1"),$(".cus_giftbox").css("opacity",".2"),$(".cus_giftcard_nextstep").unbind("mouseenter mouseleave"),$(".cus_giftcard_stop").unbind("mouseenter mouseleave"),$(".cus_giftcard_btn").fadeOut(),$(".choose-card").fadeIn(),s<575?($(".cus_bag_card").css("bottom","50%"),$(".card2").animate({top:"120%",left:"0px"},1e3),$(".card3").animate({top:"240%",left:"0px"},1e3)):($(".cus_bag_card").css("bottom","45%"),$(".card2").animate({top:"120%",left:"-60%"},1e3),$(".card3").animate({top:"120%",left:"60%"},1e3)),setTimeout(function(){$(".custom_chooseCard_btn").css("display","flex")},1500)}),$(".custom_chooseCard_prep").click(function(){$(".choosenCard").css("opacity","1"),$(".cus_step2_txt>h2").text("是否製作禮物卡?"),$(".cus_step2_txt>h3").css("opacity","0"),$(".cus_giftbox").css("opacity","1"),$(".cus_giftcard_nextstep").bind("mouseenter mouseleave"),$(".cus_giftcard_stop").bind("mouseenter mouseleave"),$(".cus_giftcard_stop").mouseenter(function(){$(".choose-bag").fadeIn(),$(".cus_bag_card").css("bottom","-5%")}).mouseleave(function(){$(".choose-bag").fadeOut(),$(".cus_bag_card").css("bottom","-100%")}),$(".cus_giftcard_nextstep").mouseenter(function(){$(".choose-card").fadeIn(),$(".cus_bag_card").css("bottom","-5%")}).mouseleave(function(){$(".choose-card").fadeOut(),$(".cus_bag_card").css("bottom","-100%")}),$(".cus_giftcard_btn").fadeIn(),$(".choose-card").fadeOut(),$(".cus_bag_card").animate({bottom:"-100%"},500),$(".card2").animate({top:"30px",left:"-50px"},1e3),$(".card3").animate({top:"30px",left:"50px"},1e3),$(".custom_chooseCard_btn").css("display","none"),$(".custom_card_textArea").fadeOut()}),$(".choose-card").click(function(){$(".choose-card").removeClass("choosenCard"),$(".choose-card").css("opacity",".5"),$(this).addClass("choosenCard").css("opacity","1")}),$(".custom_chooseCard_next").click(function(){var s,t=$(window).width();0!=$(".choosenCard").length?(s=$(".choosenCard").attr("data-cardId"),console.log(s),1==s?$(".cus_bag_card > pre").css("backgroundColor","#FFF1F4"):2==s?$(".cus_bag_card > pre").css("backgroundColor","#FFF8EB"):$(".cus_bag_card > pre").css("backgroundColor","#EBFFEB"),$(".cus_bag_card>img").css("display","none"),$(".cus_bag_card").css({bottom:"40%",transform:"translate(-50, 50%)"}),$(".choosenCard").css({display:"block",top:"10px",left:"0",transition:".5s"}),setTimeout(function(){$(".cus_step2_txt").fadeOut(),$(".custom_chooseCard_btn").fadeOut()},1e3),t<576?setTimeout(function(){$(".cus_step2_txt>h3").text("第四步"),$(".cus_step2_txt>h2").text("填寫卡片內容"),$(".custom_chooseCard_btn").css("display","flex").fadeIn(),$(".cus_step2_txt").fadeIn(),$(".custom_card_textArea").fadeIn(),$(".cus_bag_card").css({bottom:"64%",left:"50%",width:"280px",height:"160px",transform:"translate(-50%, 50%)"}),$(".choosenCard").css({width:"100%",top:"-10px"})},1500):setTimeout(function(){$(".cus_step2_txt>h3").text("第四步"),$(".cus_step2_txt>h2").text("填寫卡片內容"),$(".custom_chooseCard_btn").css("display","flex").fadeIn(),$(".cus_step2_txt").fadeIn(),$(".custom_card_textArea").fadeIn(),$(".cus_bag_card").css({bottom:"50%",left:"10%",width:"360px",height:"210px",transform:"translate(0%, 50%)"}),$(".choosenCard").css({width:"100%",top:"-10px"})},1500),setTimeout(function(){$(".choosenCard").css({transform:"scaleX(-1)",opacity:"0",transition:"2s"}),$(".cus_bag_card > pre").css({opacity:"1",transform:"scaleX(1)",transition:"2s"})},1800),$(".custom_chooseCard_btn").fadeOut(),$(".cus-cardcontent-btn").css("display","flex").fadeIn()):($(".custom_popUp").fadeIn(),$(".custom_popUp_bg").fadeIn())}),$(".cus_cardcontent_prestep").click(function(){var s=$(window).width();$(".choose-card").removeClass("choosenCard"),$(".choose-card").css({display:"block",opacity:"1",transition:".5s"}),s<575?$(".cus_bag_card").css({width:"240px",height:"140px",bottom:"50%",left:"50%",transform:"translate(-50%, 0%)"}):$(".cus_bag_card").css({width:"280px",height:"160px",bottom:"45%",left:"50%",transform:"translate(-50%, 0%)"}),$(".cus_step2_txt>h2").text("選擇禮物卡樣式"),$(".cus_step2_txt>h3").text("第四步"),$(".cus-cardcontent-btn").fadeOut(),$(".custom_chooseCard_btn").css("display","flex").fadeIn(),$(".choosenCard").css({transform:"scaleX(1)",opacity:"1",transition:".5s"}),$(".cus_bag_card > pre").css({opacity:"0",transform:"scaleX(-1)",transition:".5s"}),s<575?($(".card2").animate({top:"120%",left:"0px"},1e3),$(".card3").animate({top:"240%",left:"0px"},1e3)):($(".card2").animate({top:"120%",left:"-60%"},1e3),$(".card3").animate({top:"120%",left:"60%"},1e3)),$(".custom_card_textArea").fadeOut(),$(".custom_chooseCard_btn").fadeIn()}),$(".cus_cardcontent_nextstep").click(function(){$(".cus-cardcontent-btn").fadeOut(),$(".cus-cardIcon-btn").fadeIn(),$(".cus_step2_txt > h3").text("第五步"),$(".cus_step2_txt > h2").text("選擇禮物卡小圖案"),$(".custom_card_textArea form").css("display","none"),$(".custom_card_iconList").css("display","grid").fadeIn()});$(".custom_card_icon").click(function(){var s;$(this).toggleClass("choosen_icon"),icon_src=$(this).attr("src"),icon_id=$(this).attr("data-icon"),$(this).hasClass("choosen_icon")?(icon_body=`            
                <div id='drag' class="custom_card_IconOnCard drag" >
                    <img src='${icon_src}'  data-icon='${icon_id}'>
                </div>             
            `,$(".cus_bag_card").append(icon_body),drag()):(console.log("remove-item="+icon_id),s=`.custom_card_IconOnCard img[data-icon=${icon_id}]`,$(s).closest("div").remove())}),$(".cus_cardIcon_prestep").click(function(){$(".cus-cardIcon-btn").fadeOut(),$(".cus-cardcontent-btn").fadeIn(),$(".custom_card_textArea form").fadeIn(),$(".custom_card_iconList").css("display","none"),$(".cus_step2_txt > h3").text("第四步"),$(".cus_step2_txt > h2").text("填寫卡片內容"),$(".custom_card_IconOnCard").fadeOut(),$(".custom_card_icon").removeClass("choosen_icon")}),$(".cus_cardIcon_nextstep").click(function(){$(".cus-cardIcon-btn").fadeOut(),$(".cus-cardConfirm-btn").fadeIn(),$(".custom_card_textArea").fadeOut(),$(".cus_step2_txt > h2").text("確認禮物卡內容"),$(".cus_bag_card").css({left:"50%",transform:"translate(-50%, 50%)"}),$("#dragbasic div[id^='drag']").unbind()}),$(".cus_cardConfirm_prestep").click(function(){$(".cus-cardIcon-btn").fadeIn(),$(".cus-cardConfirm-btn").fadeOut(),$(".cus_step2_txt > h2").text("選擇禮物卡小圖案"),$(".cus_bag_card").css({left:"10%",transform:"translate(0%, 50%)"}),drag(),$(".custom_card_textArea").fadeIn()}),$(".cus_cardConfirm_nextstep").click(function(){$(".custom_card_IconOnCard").fadeOut(),$(".cus_step2_txt").fadeOut(),$(".choosenCard").css({transform:"scaleX(1)",opacity:"1",transition:"1s"}),$(".cus_bag_card > pre").css({opacity:"0",transform:"scaleX(-1)",transition:"1s"}),setTimeout(function(){$(".cus_bag_card").css({bottom:"45%",left:"50%",width:"100px",height:"75px",transform:"rotate(-30deg) translate(-50%, 50%)",transition:".5s"}),$(".choosenCard").css({width:"100%"}),$(".cus_giftbox").css({opacity:"1",transition:".5s"})},1200),setTimeout(function(){$(".custom_bag").fadeIn().css({bottom:"50%",left:"50%",transform:"translate(-50%, 50%)"})},2e3),setTimeout(function(){$(".custom_cart").fadeIn(),$(".custom_popUp_bg").fadeIn()},3e3)}),$(".custom_popUp_close").click(function(){$(".custom_popUp").fadeOut(),$(".custom_popUp_bg").fadeOut(),console.log("close")}),init()});